<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Integrated Soil Compaction Problem ‚Äî Randomized</title>

<style>
    body { font-family: Arial, sans-serif; background:#eef6f7; padding:20px; }
    h1 { color:#023047; }
    .box { background:white; padding:20px; border-radius:12px; margin-bottom:25px; box-shadow:0 0 10px #ccc; }
    .quiz-box { background:#caf0f8; padding:15px; border-radius:10px; margin-top:10px; }
    input[type="number"] { width:150px; padding:6px; }
    button { background:#0077b6; color:white; padding:8px 14px; border:none; border-radius:8px; cursor:pointer; }
    button:hover { background:#005f86; }
</style>

<script>
// =====================================================
// =============== RANDOM VALUE GENERATOR ===============
// =====================================================
function generateIntegratedProblem() {

    // Random data (realistic agricultural field values)
    let bulkDensity = (1.10 + Math.random()*0.60).toFixed(2);        // 1.10‚Äì1.70 g/cm3
    let particleDensity = (2.55 + Math.random()*0.15).toFixed(2);    // 2.55‚Äì2.70 g/cm3
    let coneForce = (300 + Math.random()*500).toFixed(0);            // 300‚Äì800 N
    let coneArea = 3.14;                                             // cm¬≤ (standard 30¬∞ cone)
    let wheelLoad = (800 + Math.random()*400).toFixed(0);            // 800‚Äì1200 kg
    let contactArea = (120 + Math.random()*80).toFixed(0);           // 120‚Äì200 cm¬≤

    // Display values
    document.getElementById("bd_val").innerText = bulkDensity;
    document.getElementById("pd_val").innerText = particleDensity;
    document.getElementById("cf_val").innerText = coneForce;
    document.getElementById("wl_val").innerText = wheelLoad;
    document.getElementById("ca_val").innerText = contactArea;

    // Compute correct answers
    let porosity = (1 - bulkDensity/particleDensity).toFixed(3);
    let voidRatio = (porosity / (1 - porosity)).toFixed(3);
    let CI = (coneForce / coneArea).toFixed(1);                       // MPa approx.
    let stress = ((wheelLoad * 9.81) / contactArea / 100).toFixed(2); // convert kg‚ÜíN, cm2‚Üím2 scale approx

    // Store answers in hidden inputs
    document.getElementById("ans_porosity").value = porosity;
    document.getElementById("ans_void").value = voidRatio;
    document.getElementById("ans_ci").value = CI;
    document.getElementById("ans_stress").value = stress;

    // Reset inputs
    document.getElementById("in_porosity").value = "";
    document.getElementById("in_void").value = "";
    document.getElementById("in_ci").value = "";
    document.getElementById("in_stress").value = "";

    document.getElementById("result").innerHTML = "";
}

// =====================================================
// =============== AUTO-CHECK ANSWERS ==================
// =====================================================
function checkIntegrated() {

    function check(idInput, idCorrect, label) {
        let user = parseFloat(document.getElementById(idInput).value);
        let correct = parseFloat(document.getElementById(idCorrect).value);

        if (isNaN(user)) return `${label}: ‚ùå No answer<br>`;

        let ok = Math.abs(user - correct) < 0.005;
        return ok
          ? `${label}: ‚úÖ Correct (${correct})<br>`
          : `${label}: ‚ùå Incorrect (Correct = ${correct})<br>`;
    }

    let feedback = "";
    feedback += check("in_porosity", "ans_porosity", "1) Porosity");
    feedback += check("in_void", "ans_void", "2) Void Ratio");
    feedback += check("in_ci", "ans_ci", "3) Cone Index (MPa)");
    feedback += check("in_stress", "ans_stress", "4) Wheel Load Stress (kPa)");

    document.getElementById("result").innerHTML = feedback;
}
</script>
</head>

<body>

<h1>Integrated Soil Compaction Numerical Problem</h1>

<div class="box">
    <p>This integrated problem assesses your understanding of soil compaction, soil physical properties, and stress transmission under wheel load.  
    All numerical values below are randomized every time you click the button.</p>

    <button onclick="generateIntegratedProblem()">üé≤ Generate New Integrated Problem</button>

    <div class="quiz-box">
        <h3><b>Problem:</b></h3>

        <p>A soil profile was tested for compaction assessment. The following measurements were obtained:</p>

        <ul>
            <li>Bulk density (œÅb): <b><span id="bd_val">‚Äî</span></b> g/cm¬≥</li>
            <li>Particle density (œÅs): <b><span id="pd_val">‚Äî</span></b> g/cm¬≥</li>
            <li>Cone penetration force: <b><span id="cf_val">‚Äî</span></b> N</li>
            <li>Wheel load: <b><span id="wl_val">‚Äî</span></b> kg</li>
            <li>Tire‚Äìsoil contact area: <b><span id="ca_val">‚Äî</span></b> cm¬≤</li>
        </ul>

        <p><b>Tasks:</b></p>
        <ol>
            <li>Compute porosity: \( n = 1 - \frac{\rho_b}{\rho_s} \)</li>
            <li>Compute void ratio: \( e = \frac{n}{1-n} \)</li>
            <li>Compute Cone Index: \( CI = \frac{F}{A} \) (MPa)</li>
            <li>Compute applied stress under wheel load:  
                \( \sigma = \frac{W \cdot 9.81}{A} \)  (converted into kPa)
            </li>
        </ol>

        <h3>Your Answers</h3>

        <label>1) Porosity:</label><br>
        <input type="number" id="in_porosity" step="0.001"><br><br>

        <label>2) Void Ratio:</label><br>
        <input type="number" id="in_void" step="0.001"><br><br>

        <label>3) Cone Index (MPa):</label><br>
        <input type="number" id="in_ci" step="0.1"><br><br>

        <label>4) Wheel Load Stress (kPa):</label><br>
        <input type="number" id="in_stress" step="0.01"><br><br>

        <button onclick="checkIntegrated()">Check Answers</button>
        <p id="result"></p>

        <!-- Hidden correct answers -->
        <input type="hidden" id="ans_porosity">
        <input type="hidden" id="ans_void">
        <input type="hidden" id="ans_ci">
        <input type="hidden" id="ans_stress">
    </div>
</div>

</body>
</html>
